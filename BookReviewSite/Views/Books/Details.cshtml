@using BookReviewSite.Data.Entities
@model Book

@{
    ViewData["Title"] = "Book Details";
}

<h1>@Model.Title</h1>

<!-- Add Create Review Button -->
<div class="mb-4">
    <a asp-controller="Reviews"
       asp-action="Create"
       asp-route-bookId="@Model.BookId"
       class="btn btn-primary">
        <i class="fas fa-edit"></i> Write a Review
    </a>
</div>

<!-- Existing Book Details -->
<div class="card mb-4">
    <div class="card-body">
        <h5 class="card-subtitle mb-3 text-muted">by @Model.Author?.FullName</h5>
        
    </div>
</div>

<!-- Reviews Section -->
<h3>Reader Reviews</h3>
@foreach (var review in Model.Reviews)
{
    <div class="card mb-3">
        <div class="card-body">
            <h5>@review.ReviewerName</h5>
            <div class="text-warning">
                @for (int i = 0; i < review.ReviewRating; i++)
                {
                    <i class="fas fa-star"></i>
                }
            </div>
            <p class="mt-2">@review.ReviewContent</p>
            <small class="text-muted">
                Reviewed on @review.CreatedAt.ToString("MMMM dd, yyyy")
            </small>
        </div>
    </div>
}

<a asp-action="Index" class="btn btn-secondary">Back to List</a>